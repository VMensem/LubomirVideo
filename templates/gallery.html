{% extends "base.html" %}
{% block content %}
<div class="gallery">
    {% for file in files %}
        {% if file.lower().endswith(('png','jpg','jpeg','gif')) %}
            <img src="{{ url_for('static', filename='uploads/' + file) }}" class="thumb" onclick="openFullscreen(this)">
        {% elif file.lower().endswith(('mp4','mov')) %}
            <video class="thumb" onclick="openFullscreen(this)" controls>
                <source src="{{ url_for('static', filename='uploads/' + file) }}" type="video/mp4">
            </video>
        {% endif %}
    {% endfor %}
</div>
<script>
function openFullscreen(el) {
    if (el.tagName === "IMG") {
        const modal = document.createElement('div');
        modal.classList.add('fullscreen-modal');
        modal.innerHTML = `<img src="${el.src}" onclick="this.parentElement.remove()">`;
        document.body.appendChild(modal);
    } else if (el.tagName === "VIDEO") {
        const modal = document.createElement('div');
        modal.classList.add('fullscreen-modal');
        modal.innerHTML = `<video src="${el.querySelector('source').src}" controls autoplay onclick="this.parentElement.remove()"></video>`;
        document.body.appendChild(modal);
    }
}
</script>
{% endblock %}
