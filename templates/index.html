{% extends "base.html" %}
{% block content %}
<div class="gallery">
    {% for image in images %}
        <img src="{{ url_for('static', filename='uploads/' + image) }}" class="thumb" onclick="openFullscreen(this)">
    {% endfor %}
    {% for video in videos %}
        <video class="thumb" onclick="openFullscreen(this)" controls>
            <source src="{{ url_for('static', filename='uploads/' + video) }}" type="video/mp4">
        </video>
    {% endfor %}
</div>

<script>
function openFullscreen(el) {
    if (el.tagName === "IMG") {
        const modal = document.createElement('div');
        modal.classList.add('fullscreen-modal');
        modal.innerHTML = `<img src="${el.src}" onclick="this.parentElement.remove()">`;
        document.body.appendChild(modal);
    } else if (el.tagName === "VIDEO") {
        const modal = document.createElement('div');
        modal.classList.add('fullscreen-modal');
        modal.innerHTML = `<video src="${el.querySelector('source').src}" controls autoplay onclick="this.parentElement.remove()"></video>`;
        document.body.appendChild(modal);
    }
}
</script>
{% endblock %}
